<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-TG3F4YGJW1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() {
            dataLayer.push(arguments);
        }
        gtag("js", new Date());

        gtag("config", "G-TG3F4YGJW1");
    </script>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta property="og:title" content="Ruby Games" />
    <meta property="og:description" content="Ruby arcade is a game network that features a wide variety of engaging and immersive games suitable for all ages." />
    <meta property="og:image" content="https://rubyarcade.lol/media/icons/metapicture.png" />
    
    <title>Games</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@100..900&display=swap" rel="stylesheet"/>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet"/>
    <link rel="icon" type="image/x-icon" href="/media/icons/favicon.ico" />

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-2XEFG8CYTH"></script>


    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/navbar.css">

    <style>
        /* Add any additional styles here */
    </style>

</head>

<body>
    <div class="navbar">
        <button onclick="window.location.href='index.html'">
            <img
                src="/media/icons/rubyarcade.png"
                alt="Ruby Games Logo"
                class="logo"
                width="125vh"
                height="27vh"
            />
        </button>
        
        <div class="navbar-right">
            <button onclick="window.location.href='index.html'">
                <img src="/media/icons/home.png" width="27hh"/>
            </button>
            <button onclick="window.location.href='games.html'">
                <img src="/media/icons/games.png" width="27hh"/>
            </button>
            <button onclick="window.location.href='apps.html'">
                <img src="/media/icons/apps.png" width="27hh"/>
            </button>
            
            <button onclick="window.location.href='utilities.html'">
                <img src="/media/icons/utilities.png" width="27hh"/>
            </button>
            <button onclick="window.location.href='search.html'">
                <img src="/media/icons/search.png" width="27hh"/>
            </button>
        </div>
    </div>
    

    <center>
        <h1>Games</h1>
        <input
            type="text"
            id="searchInput"
            onkeyup="searchGames()"
            placeholder="Search 340+ Games"
        />
    </center>

<h1> Games are being fixed</h1>
<h2>click <a href=https://ruby-arcade-games.onrender.com/> here </a> for all the games</h2>
    
    <div id="gamesList" style="display: flex; flex-wrap: wrap; justify-content: center; align-items: center;">
        
        
  </div>

    </div>

    <!-- Game loader section -->
    <section id="gameLoaderSection" style="display: none;">
        <div id="gameLoaderContainer">
            <iframe id="gameFrame" src="" frameborder="0"></iframe>
        </div>
        <div class="gameBar">
            <div class="gameBarButton" onclick="removeGameLoader()">
                <img src="/media/icons/remove.png" width="20px" alt="Remove Game Loader" />
            </div>
            <img src="/media/icons/ruby.png" width="20px" />
            <div class="button-group">
                <div class="gameBarButton" onclick="refreshGame()">
                    <img src="/media/icons/refresh.png" width="20px" alt="Refresh" />
                </div>
                <div class="gameBarButton" onclick="toggleFullscreen()">
                    <img src="/media/icons/fullscreen.png" width="20px" alt="Fullscreen" />
                </div>
            </div>
        </div>
    </section>

    <center>
        <h6>Games on this site are for entertainment purposes only. All rights belong to their respective owners.</h6>
    </center>

    <script src="/js/loader.js"></script>
    <script src="/js/button.js"></script>
    <script src="/js/search.js"></script>
    <script src="assets/games.js"></script>

    <script>

function applyHoverEffect(button) {
    button.addEventListener('mousemove', e => {
        const rect = button.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;
        const centerX = rect.width / 2;
        const centerY = rect.height / 2;
        const deltaX = (x - centerX) / centerX;
        const deltaY = (y - centerY) / centerY;
        const offsetX = deltaX * 10; // Adjust the scale factor as needed
        const offsetY = deltaY * 10; // Adjust the scale factor as needed
        const scale = 1.2;
        const img = button.querySelector('img');
        img.style.transform = `translate(${offsetX}px, ${offsetY}px) scale(${scale})`;
    });

    button.addEventListener('mouseleave', () => {
        const img = button.querySelector('img');
        img.style.transform = 'translate(0, 0) scale(1)';
    });

    button.addEventListener('mousemove', e => {
        const rect = button.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;
        button.style.backgroundImage = `radial-gradient(circle at ${x}px ${y}px, rgba(255, 255, 255, 0) 0%, rgba(0, 0, 0, 0.8) 100%)`;
    });

    button.addEventListener('mouseleave', () => {
        button.style.backgroundImage = '';
    });
}

// Function to insert games into the HTML
function insertGamesIntoPage(games) {
    // Sort games alphabetically by name
    games.sort((a, b) => a.name.localeCompare(b.name));
    
    var gamesContainer = document.getElementById("gamesList");
    if (gamesContainer) {
        gamesContainer.innerHTML = ""; // Clear the container first
        games.forEach(function(game) {
            var gameHTML = generateGameHTML(game);
            gamesContainer.innerHTML += gameHTML;
        });

        // Apply hover effect to each dynamically generated button
        const buttons = document.querySelectorAll('.btn-hover');
        buttons.forEach(button => {
            applyHoverEffect(button);
        });
    }
}

// Function to dynamically generate HTML for games
function generateGameHTML(game) {
    return `
        <div class="btn btn-hover" onclick="loadGame('${game.playUrl}')" onmouseover="applyHoverEffect(this)" onmouseout="removeHoverEffect(this)">
            <img src="${game.imageUrl}" />
            <span>${game.name}</span>
        </div>
    `;
}

// Load games from JSON file
fetch('assets/data/games.json')
    .then(response => response.json())
    .then(data => {
        // Insert games into the page
        insertGamesIntoPage(data);
    })
    .catch(error => {
        console.error('Error loading the JSON file:', error);
    });
  </script>
</body>
</html>
